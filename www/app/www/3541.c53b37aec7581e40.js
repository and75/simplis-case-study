"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3541],{3541:(N,f,c)=>{c.r(f),c.d(f,{SubscribeModule:()=>J});var u=c(6814),l=c(5548),r=c(95),m=c(553),b=c(9862),h=c(2096),g=c(9397),d=c(6306),e=c(6689),C=c(6466);let _=(()=>{class n{constructor(t,i){this.http=t,this.authService=i,this.ApiServiceUrl=`${m.N.apiUrl}`}get Header(){return new b.WM}get AuthToken(){return this.authService.authToken}getActivities(){return this.http.get(`${this.ApiServiceUrl}activities`,{headers:this.Header}).pipe((0,g.b)(i=>this.log("fetched getActivities (all)")),(0,d.K)(this.handleError("getActivities (all)",[])))}searchActivities(t){return t.trim()?this.http.get(`${this.ApiServiceUrl}activities/search?q=${t}`,{headers:this.Header}).pipe((0,g.b)(s=>this.log(`fetched AppSearch matching "${t}"`)),(0,d.K)(this.handleError("AppSearch",[]))):(0,h.of)([])}downloadPdf(t){return this.http.get(`${m.N.apiUrl}drive/download/${t}`,{headers:this.Header,responseType:"blob"}).pipe((0,g.b)(s=>this.log("fetched downloadPdf ")),(0,d.K)(this.handleError("downloadPdf")))}handleError(t="operation",i){return s=>(console.error(s),console.log(`${t} failed: ${s.message}`),(0,h.of)(i))}log(t){console.info(t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(b.eN),e.LFG(C.e))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=c(5204);class M{constructor(o){this.currentStep=o.currentStep,this.validStep=o.validStep,this.activity=null==o?void 0:o.activity,this.customer=null==o?void 0:o.customer,this.agreements=null==o?void 0:o.agreements}}function x(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",3),e.NdJ("click",function(){const a=e.CHM(t).index,p=e.oxw(2);return e.KtG(p.setStep(a))}),e.qZA()}2&n&&e.Q6J("ngClass","active"===o.$implicit?"active":"disabled")}function O(n,o){if(1&n&&(e.TgZ(0,"ol",1),e.YNc(1,x,1,1,"li",2),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.tSteps)}}let P=(()=>{class n{constructor(){this.steps=3,this.current=1,this.stepEvent=new e.vpe,this.tSteps=[]}ngOnInit(){for(let t=0;t<this.steps;t++)this.tSteps.push(this.current-1===t?"active":"disabled")}ngOnChanges(t){for(const s in t){const a=t[s],p=a.currentValue;a.isFirstChange()||this.setStep(p-1)}}setStep(t){this.tSteps=this.tSteps.map((i,s)=>t<s?"disabled":"active"),this.tSteps[t]="active",this.current=t+1,console.log(this.current),this.stepEvent.emit(this.current)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-stepper"]],inputs:{steps:"steps",current:"current"},outputs:{stepEvent:"stepEvent"},features:[e.TTD],decls:1,vars:1,consts:[["class","stepper",4,"ngIf"],[1,"stepper"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"]],template:function(t,i){1&t&&e.YNc(0,O,2,1,"ol",0),2&t&&e.Q6J("ngIf",i.tSteps)},dependencies:[u.mk,u.sg,u.O5],styles:['ol.stepper[_ngcontent-%COMP%]{--default-b: lightgrey;--default-c: black;--active-b: var(--ion-color-primary);--active-c: white;--circle: 2.5em;--b: 5px;display:flex;list-style:none;justify-content:space-between;background:linear-gradient(var(--default-b) 0 0) no-repeat 50% calc((var(--circle) - var(--b)) / 2)/100% var(--b);margin:20px;padding:0;font-size:22px;font-weight:700;counter-reset:step;overflow:hidden}ol.stepper[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:grid;place-items:center;gap:5px;font-family:sans-serif;position:relative}ol.stepper[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:counter(step) " ";counter-increment:step;display:grid;place-content:center;aspect-ratio:1;height:var(--circle);border:5px solid #fff;box-sizing:border-box;background:var(--default-b);color:var(--default-c);border-radius:50%;font-family:monospace;z-index:1}ol.stepper[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:before{background:var(--active-b);color:var(--active-c)}ol.stepper[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";position:absolute;height:var(--b);right:100%;top:calc((var(--circle) - var(--b)) / 2);width:100vw;background:var(--active-b)}']}),n})();function S(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",13),e.NdJ("click",function(){const a=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.setActivity(a))}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t.name)}}function Z(n,o){if(1&n&&(e.TgZ(0,"div",11)(1,"ul"),e.YNc(2,S,2,1,"li",12),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.activities)}}function y(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"fieldset")(1,"legend"),e._uU(2,"Quel produit recherchez-vous ? "),e.qZA(),e.TgZ(3,"ion-list")(4,"ion-item")(5,"ion-input",9),e.NdJ("ngModelChange",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.query=s)})("keyup",function(s){e.CHM(t);const a=e.oxw();return e.KtG(a.filter(s))}),e.qZA()()(),e.YNc(6,Z,3,1,"div",10),e.qZA()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("clearInput",!0)("ngModel",t.query),e.xp6(1),e.Q6J("ngIf",t.activities)}}function A(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",14),e.NdJ("ngSubmit",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.saveCustomer())}),e.TgZ(1,"fieldset")(2,"legend"),e._uU(3,"Quelques informations sur votre entreprise !"),e.qZA(),e.TgZ(4,"ion-list")(5,"ion-item"),e._UZ(6,"ion-input",15),e.qZA(),e.TgZ(7,"ion-item"),e._UZ(8,"ion-input",16),e.qZA(),e.TgZ(9,"ion-item"),e._UZ(10,"ion-input",17),e.qZA(),e.TgZ(11,"ion-item"),e._UZ(12,"ion-input",18),e.qZA(),e.TgZ(13,"ion-item"),e._UZ(14,"ion-input",19),e.qZA()()(),e.TgZ(15,"ion-button",20),e._uU(16),e._UZ(17,"ion-icon",21),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.formData),e.xp6(6),e.Q6J("clearInput",!0),e.xp6(2),e.Q6J("clearInput",!0),e.xp6(2),e.Q6J("clearInput",!0),e.xp6(2),e.Q6J("clearInput",!0),e.xp6(2),e.Q6J("clearInput",!0),e.xp6(2),e.hij(" ",t.getStepButtonTitle()," ")}}function T(n,o){1&n&&(e.TgZ(0,"fieldset",22)(1,"legend"),e._uU(2,"Notre offre sur mesure pour vous !"),e.qZA(),e.TgZ(3,"ion-card",23)(4,"ion-card-header")(5,"ion-card-title"),e._uU(6,"9.99 \u20ac"),e.qZA(),e.TgZ(7,"ion-card-subtitle"),e._uU(8,"Achat de coupe de bois"),e.qZA()(),e.TgZ(9,"ion-card-content")(10,"div"),e._UZ(11,"ion-icon",24),e.qZA(),e.TgZ(12,"div"),e._uU(13,"T\xe9l\xe9chargez votre devis"),e.qZA()()()())}const I=[{path:"",component:(()=>{class n{constructor(t){this.subscribeService=t,this.activities=null,this.query="",this.subscription=new M({currentStep:1,validStep:[0],activity:null,customer:null,agreements:null}),this.customer={raison_sociale:"",siret:"",adresse_postale:"",email:"",telephone:0}}ngOnInit(){this.setForm()}ngAfterViewInit(){this.activities=null}searchActivities(){this.activities=null,this.subscribeService.searchActivities(this.query).subscribe(t=>{1==t.status&&(this.activities=null,this.activities=t.data)})}filter(t){this.query.length>=2&&this.searchActivities()}setStep(t){console.log(t),this.subscription.currentStep=t}setActivity(t){this.subscription.activity=t,this.query=t.name,this.activities=null,setTimeout(()=>{this.subscription.currentStep=2,console.log(this.subscription)},2e3)}getStepButtonTitle(){return 3==this.subscription.currentStep?"Je finalise mon achat":"Next"}setForm(){this.formData=new r.cw({raison_sociale:new r.NI(this.customer.raison_sociale,{validators:[r.kI.required]}),siret:new r.NI(this.customer.siret,{validators:[r.kI.required]}),adresse_postale:new r.NI(this.customer.siret,{validators:[r.kI.required]}),email:new r.NI(this.customer.email,{validators:[r.kI.required]}),telephone:new r.NI(this.customer.telephone,{validators:[r.kI.required]})},{updateOn:"submit"})}saveCustomer(){console.log(this.formData.status,this.formData.value,this.formData)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-subscribe"]],decls:12,vars:5,consts:[[3,"fullscreen"],[1,"container","subscribe"],[1,"box-subscribe"],["src","http://static.localhost/assets/img/simplis-logo-B100.svg","alt","L'assurance professionnelle des Auto-Entrepreneurs et des Ind\xe9pendants",1,"logo"],["color","secondary",1,"claimer"],[3,"current","stepEvent"],[4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","step3",4,"ngIf"],["placeholder","Enter text","id","query","name","query",3,"clearInput","ngModel","ngModelChange","keyup"],["class","autocomplete",4,"ngIf"],[1,"autocomplete"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[3,"formGroup","ngSubmit"],["formControlName","raison_sociale","label","Raison sociale","labelPlacement","floating","autocomplete","false",3,"clearInput"],["formControlName","siret","label","Siret","labelPlacement","floating","autocomplete","false",3,"clearInput"],["formControlName","adresse_postale","label","Adresse postale","labelPlacement","floating","autocomplete","false",3,"clearInput"],["formControlName","email","label","Email","labelPlacement","floating","autocomplete","false",3,"clearInput"],["formControlName","telephone","label","T\xe9l\xe9phone","labelPlacement","floating","autocomplete","false",3,"clearInput"],["type","submit","color","secondary"],["name","arrow-forward-circle-outline"],[1,"step3"],["color","secondary"],["name","download-outline","aria-label","Download devis"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-content",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.TgZ(4,"p",4),e._uU(5,'"C\'est parti pour vous assurer au meilleur tarif et en quelques clics !"'),e.qZA(),e.TgZ(6,"app-stepper",5),e.NdJ("stepEvent",function(a){return i.setStep(a)}),e.qZA(),e.TgZ(7,"form"),e.YNc(8,y,7,3,"fieldset",6),e.qZA(),e.YNc(9,A,18,7,"form",7),e.TgZ(10,"form"),e.YNc(11,T,14,0,"fieldset",8),e.qZA()()()()),2&t&&(e.Q6J("fullscreen",!0),e.xp6(6),e.Q6J("current",i.subscription.currentStep),e.xp6(2),e.Q6J("ngIf",1==i.subscription.currentStep),e.xp6(1),e.Q6J("ngIf",2==i.subscription.currentStep),e.xp6(2),e.Q6J("ngIf",3==i.subscription.currentStep))},dependencies:[u.sg,u.O5,r._Y,r.JJ,r.JL,r.On,r.F,r.sg,r.u,l.YG,l.PM,l.FN,l.Zi,l.tO,l.Dq,l.W2,l.gu,l.pK,l.Ie,l.q_,l.j9,P],styles:[".container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%;margin:0 30px}.box-subscribe[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column;min-height:88vh;max-width:600px}.box-subscribe[_ngcontent-%COMP%]   img.logo[_ngcontent-%COMP%]{width:200px}.box-subscribe[_ngcontent-%COMP%]   .claimer[_ngcontent-%COMP%]{text-align:center;color:var(--ion-color-secondary);font-size:.9rem}.box-subscribe[_ngcontent-%COMP%]   app-stepper[_ngcontent-%COMP%]{width:70%}.box-subscribe[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:1rem}.box-subscribe[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{border:thick solid var(--ion-color-primary);border-radius:15px}.box-subscribe[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .autocomplete[_ngcontent-%COMP%], .box-subscribe[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:#fff;background:var(--ion-color-primary);font-size:1em;padding:5px 15px;border-radius:10px}.box-subscribe[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .autocomplete[_ngcontent-%COMP%]{max-width:400px;padding:7px}.box-subscribe[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .autocomplete[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.box-subscribe[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .autocomplete[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 0;font-size:.8rem;cursor:pointer}.box-subscribe[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .autocomplete[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:0px}.box-subscribe[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .autocomplete[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:var(--ion-color-secondary);border-radius:10px}.box-subscribe[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{text-align:left}.box-subscribe[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:2rem}.box-subscribe[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   fieldset.step3[_ngcontent-%COMP%]{background-color:var(--ion-color-secondary)}.box-subscribe[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   fieldset.step3[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:4rem;font-weight:700}.box-subscribe[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   fieldset.step3[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-card-subtitle[_ngcontent-%COMP%]{font-size:1rem;font-weight:700;text-transform:uppercase}.box-subscribe[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   fieldset.step3[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:3rem}"]}),n})()}];let w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[v.Bz.forChild(I),v.Bz]}),n})(),q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[u.ez]}),n})(),J=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[_],imports:[u.ez,r.u5,r.UX,l.Pc,q,w]}),n})()}}]);